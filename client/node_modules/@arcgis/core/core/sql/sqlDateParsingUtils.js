/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
import{SqlError as n,SqlErrorCodes as e}from"../../arcade/featureset/support/errorsupport.js";import{DateOnly as t}from"./DateOnly.js";import{SqlInterval as r}from"./SqlInterval.js";import{SqlTimeStampOffset as a}from"./SqlTimestampOffset.js";import{TimeOnly as s}from"./TimeOnly.js";import{UnknownTimeZone as o,substituteUnknownTimezone as i}from"./UnknownTimeZone.js";import{DateTime as p}from"luxon";const d=/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/,f=/^(\d{1,2}):(\d{1,2})$/,l=/^(\d{1,2}):(\d{1,2}):(\d{1,2}).([0-9]+)$/,u=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,c=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$/,m=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$/,I=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$/,w=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/;function h(n,e){switch(e){case"system":case"local":case null:return p.fromJSDate(n);default:return"unknown"===e?.toLowerCase()?p.fromMillis(n.getTime(),{zone:o.instance}):p.fromJSDate(n).setZone(e)}}function T(n){return"number"==typeof n}function v(n){return"string"==typeof n||n instanceof String}function y(n){return n instanceof r}function x(n){return n instanceof Date}function S(n){return n instanceof p}function j(n){return n instanceof t}function $(n){return n instanceof s}function D(n){return n instanceof a}function O(t){let r=d.exec(t);if(null!==r){const[,t,a,o]=r,i=s.fromParts(parseInt(t,10),parseInt(a,10),parseInt(o,10),0);if(null!==i)return i;throw new n(e.InvalidTime)}if(r=f.exec(t),null!==r){const[,t,a]=r,o=s.fromParts(parseInt(t,10),parseInt(a,10),0,0);if(null!==o)return o;throw new n(e.InvalidTime)}if(r=l.exec(t),null!==r){const[,t,a,o,i]=r,p=s.fromParts(parseInt(t,10),parseInt(a,10),parseInt(o,10),parseInt(i,10));if(null!==p)return p;throw new n(e.InvalidTime)}throw new n(e.InvalidTime)}function P(t,r,s=!1){let o=c.exec(t);if(null!==o){const[,t,a,s,d,f,l,u]=o,c=p.fromObject({year:parseInt(t,10),month:parseInt(a,10),day:parseInt(s,10),hour:parseInt(d,10),minute:parseInt(f,10),second:parseInt(l,10),millisecond:u?parseInt(u.replace(".",""),10):0},{zone:i(r)});if(!1===c.isValid)throw new n(e.InvalidTimeStamp);return c}if(o=m.exec(t),null!==o){const[,t,r,s,i,p,d,f,l,u,c]=o,m=a.fromParts(parseInt(t,10),parseInt(r,10),parseInt(s,10),parseInt(i,10),parseInt(p,10),parseInt(d,10),f?parseInt(f.replace(".",""),10):0,"-"===l,parseInt(u,10),parseInt(c,10));if(!1===m.isValid)throw new n(e.InvalidTimeStamp);return m}if(o=I.exec(t),null!==o){const[,t,r,s,i,p,d,f,l]=o,u=a.fromParts(parseInt(t,10),parseInt(r,10),parseInt(s,10),parseInt(i,10),parseInt(p,10),0,0,"-"===d,parseInt(f,10),parseInt(l,10));if(!1===u.isValid)throw new n(e.InvalidTimeStamp);return u}if(o=w.exec(t),null!==o){const[,t,a,s,d,f]=o,l=p.fromObject({year:parseInt(t,10),month:parseInt(a,10),day:parseInt(s,10),hour:parseInt(d,10),minute:parseInt(f,10),second:0},{zone:i(r)});if(!1===l.isValid)throw new n(e.InvalidTimeStamp);return l}if(o=u.exec(t),null!==o){const[,t,a,s]=o,d=p.fromObject({year:parseInt(t,10),month:parseInt(a,10),day:parseInt(s,10),hour:0,minute:0,second:0},{zone:i(r)});if(!1===d.isValid)throw new n(e.InvalidTimeStamp);return d}throw new n(e.InvalidTimeStamp)}function V(r,a){const s=u.exec(r);if(null===s)try{return P(r,a)}catch{throw new n(e.InvalidDate)}const[,o,i,p]=s,d=t.fromParts(parseInt(o,10),parseInt(i,10),parseInt(p,10));if(null===d)throw new n(e.InvalidDate);return d}export{h as convertToExecutingTimeZone,x as isDate,j as isDateOnly,S as isDateTime,T as isNumber,y as isSqlInterval,v as isString,$ as isTimeOnly,D as isTimestampOffset,V as parseDate,O as parseTime,P as parseTimestamp};
